<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <meta name="generator" content="VuePress 2.0.0-rc.19">
    <script>
      (function() {
        const userMode = localStorage.getItem('vuepress-reco-color-scheme') || 'auto';
        const systemDarkMode = window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches;

        if (userMode === 'dark' || (userMode === 'auto' && systemDarkMode)) {
          document.documentElement.classList.toggle('dark', true);
        }
      })();
    </script>
    <link rel="icon" href="/suspicious_eyes.png"><title>Solid Principles Part 1 : The L in SOLID | BakaCoder</title><meta name="description" content="">
    <link rel="preload" href="/assets/style-C2pV2qh2.css" as="style"><link rel="stylesheet" href="/assets/style-C2pV2qh2.css">
    <link rel="modulepreload" href="/assets/app--Ei2UsaZ.js"><link rel="modulepreload" href="/assets/liskov.html-DlIY8BJF.js">
    <link rel="prefetch" href="/assets/timeline.html-D09Ye9bE.js" as="script"><link rel="prefetch" href="/assets/posts.html-BAyJo9Kq.js" as="script"><link rel="prefetch" href="/assets/friendship-link.html-IM0aXw8g.js" as="script"><link rel="prefetch" href="/assets/1.html-BUZtlSTY.js" as="script"><link rel="prefetch" href="/assets/1.html-BUiA0J3Q.js" as="script"><link rel="prefetch" href="/assets/1.html-CWB8B62S.js" as="script"><link rel="prefetch" href="/assets/1.html-P5Bd4meG.js" as="script"><link rel="prefetch" href="/assets/1.html-C7AZQ9Es.js" as="script"><link rel="prefetch" href="/assets/1.html-CsrOGwIL.js" as="script"><link rel="prefetch" href="/assets/1.html-C29RnmE5.js" as="script"><link rel="prefetch" href="/assets/1.html-CWw2s1ch.js" as="script"><link rel="prefetch" href="/assets/index.html-DpJo_dxd.js" as="script"><link rel="prefetch" href="/assets/install.html-CySHLSPB.js" as="script"><link rel="prefetch" href="/assets/java_functional_practises.html-ByvDhFk5.js" as="script"><link rel="prefetch" href="/assets/java_8_features.html-DSzcgake.js" as="script"><link rel="prefetch" href="/assets/java_8_streams.html-B7yJIqi5.js" as="script"><link rel="prefetch" href="/assets/scala_futures.html-DrMA1qGx.js" as="script"><link rel="prefetch" href="/assets/solid_part_2.html-1o34txU3.js" as="script"><link rel="prefetch" href="/assets/404.html-nNH8WJxW.js" as="script"><link rel="prefetch" href="/assets/Valine.min-_LyT3bfY.js" as="script"><link rel="prefetch" href="/assets/giscus-aTimukGI-DWEKOTfS.js" as="script">
  </head>
  <body>
    <div id="app"><!--[--><div class="theme-container series--no show-catalog"><header class="navbar-container not-open"><div class="navbar-inner"><div class="site-brand nav-item"><img class="logo" src="/gintoki_logo.png" alt="BakaCoder"><a href="/" class="site-name can-hide">BakaCoder</a></div><div class="nav-item navbar-links-wrapper" style=""><div><form class="search-box" role="search"><input type="search" autocomplete="off" spellcheck="false" value><!----></form></div><nav class="navbar-links"><!--[--><div class="navbar-links__item"><a href="/" class="link" aria-label="Home"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:;font-size:14px;"><!--[-->Home<!--]--></span></span><!--[--><!--]--></a></div><div class="navbar-links__item"><a href="/categories/technology/1.html" class="link" aria-label="Categories"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:;font-size:14px;"><!--[-->Categories<!--]--></span></span><!--[--><!--]--></a></div><div class="navbar-links__item"><a href="/tags/java/1.html" class="link" aria-label="Tags"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:;font-size:14px;"><!--[-->Tags<!--]--></span></span><!--[--><!--]--></a></div><!--]--><!----><span class="xicon-container btn-toggle-dark-mode btn--dark-mode navbar-links__item"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewbox="0 0 32 32" style="width:20px;height:20px;font-size:20px;color:;"><path d="M15 2h2v3h-2z" fill="currentColor"></path><path d="M27 15h3v2h-3z" fill="currentColor"></path><path d="M15 27h2v3h-2z" fill="currentColor"></path><path d="M2 15h3v2H2z" fill="currentColor"></path><path d="M5.45 6.884l1.414-1.415l2.121 2.122l-1.414 1.414z" fill="currentColor"></path><path d="M23 7.58l2.121-2.12l1.414 1.414l-2.121 2.121z" fill="currentColor"></path><path d="M23.002 24.416l1.415-1.414l2.12 2.122l-1.413 1.414z" fill="currentColor"></path><path d="M5.47 25.13L7.59 23L9 24.42l-2.12 2.12l-1.41-1.41z" fill="currentColor"></path><path d="M16 8a8 8 0 1 0 8 8a8 8 0 0 0-8-8zm0 14a6 6 0 0 1 0-12z" fill="currentColor"></path></svg></span><ul class="social-links navbar-links__item"><!--[--><li class="social-item"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewbox="0 0 32 32" style="width:25px;height:25px;"><path d="M16 2a14 14 0 0 0-4.43 27.28c.7.13 1-.3 1-.67v-2.38c-3.89.84-4.71-1.88-4.71-1.88a3.71 3.71 0 0 0-1.62-2.05c-1.27-.86.1-.85.1-.85a2.94 2.94 0 0 1 2.14 1.45a3 3 0 0 0 4.08 1.16a2.93 2.93 0 0 1 .88-1.87c-3.1-.36-6.37-1.56-6.37-6.92a5.4 5.4 0 0 1 1.44-3.76a5 5 0 0 1 .14-3.7s1.17-.38 3.85 1.43a13.3 13.3 0 0 1 7 0c2.67-1.81 3.84-1.43 3.84-1.43a5 5 0 0 1 .14 3.7a5.4 5.4 0 0 1 1.44 3.76c0 5.38-3.27 6.56-6.39 6.91a3.33 3.33 0 0 1 .95 2.59v3.84c0 .46.25.81 1 .67A14 14 0 0 0 16 2z" fill-rule="evenodd" fill="currentColor"></path></svg></li><li class="social-item"><IconGithub style="width:25px;height:25px;"></IconGithub></li><!--]--></ul></nav><span class="xicon-container btn-toggle-menus"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewbox="0 0 32 32" style="width:20px;height:20px;font-size:20px;color:;"><circle cx="16" cy="8" r="2" fill="currentColor"></circle><circle cx="16" cy="16" r="2" fill="currentColor"></circle><circle cx="16" cy="24" r="2" fill="currentColor"></circle></svg></span></div></div></header><!----><!----><!----><div class="theme-main" style=""><!----><!--[--><main class="page-container"><div class="page-content"><h1 class="page-title">Solid Principles Part 1 : The L in SOLID</h1><div class="page-info"><span class="xicon-container left"><!--[--><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewbox="0 0 32 32" class="xicon-icon" style="width:18px;height:18px;font-size:18px;color:;"><path d="M16 4a5 5 0 1 1-5 5a5 5 0 0 1 5-5m0-2a7 7 0 1 0 7 7a7 7 0 0 0-7-7z" fill="currentColor"></path><path d="M26 30h-2v-5a5 5 0 0 0-5-5h-6a5 5 0 0 0-5 5v5H6v-5a7 7 0 0 1 7-7h6a7 7 0 0 1 7 7z" fill="currentColor"></path></svg><!--]--><span class="xicon-content" style="color:;font-size:14px;"><!--[-->Samrat Saha<!--]--></span></span><span class="xicon-container left"><!--[--><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewbox="0 0 32 32" class="xicon-icon" style="width:18px;height:18px;font-size:18px;color:;"><path d="M26 4h-4V2h-2v2h-8V2h-2v2H6c-1.1 0-2 .9-2 2v20c0 1.1.9 2 2 2h20c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm0 22H6V12h20v14zm0-16H6V6h4v2h2V6h8v2h2V6h4v4z" fill="currentColor"></path></svg><!--]--><span class="xicon-content" style="color:;font-size:14px;"><!--[-->2020-05-25<!--]--></span></span><span class="xicon-container left"><!--[--><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewbox="0 0 32 32" class="xicon-icon" style="width:18px;height:18px;font-size:18px;color:;"><path d="M11.17 6l3.42 3.41l.58.59H28v16H4V6h7.17m0-2H4a2 2 0 0 0-2 2v20a2 2 0 0 0 2 2h24a2 2 0 0 0 2-2V10a2 2 0 0 0-2-2H16l-3.41-3.41A2 2 0 0 0 11.17 4z" fill="currentColor"></path></svg><!--]--><span class="xicon-content" style="color:;font-size:14px;"><!--[--><!--[--><a href="/categories/technology/1.html" class="">technology</a><!--]--><!--]--></span></span><span class="xicon-container left"><!--[--><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewbox="0 0 32 32" class="xicon-icon" style="width:18px;height:18px;font-size:18px;color:;"><path d="M10 14a4 4 0 1 1 4-4a4.005 4.005 0 0 1-4 4zm0-6a2 2 0 1 0 1.998 2.004A2.002 2.002 0 0 0 10 8z" fill="currentColor"></path><path d="M16.644 29.415L2.586 15.354A2 2 0 0 1 2 13.941V4a2 2 0 0 1 2-2h9.941a2 2 0 0 1 1.414.586l14.06 14.058a2 2 0 0 1 0 2.828l-9.943 9.943a2 2 0 0 1-2.829 0zM4 4v9.942L18.058 28L28 18.058L13.942 4z" fill="currentColor"></path></svg><!--]--><span class="xicon-content" style="color:;font-size:14px;"><!--[--><!--[--><a href="/tags/intermediate/1.html" class="">intermediate</a><a href="/tags/design-principle/1.html" class="">design principle</a><a href="/tags/scala/1.html" class="">scala</a><!--]--><!--]--></span></span><!----></div><div class="theme-reco-md-content"><div><h2 id="the-dreaded-liskov-substitution-principle" tabindex="-1"><a class="header-anchor" href="#the-dreaded-liskov-substitution-principle"><span>The Dreaded Liskov Substitution Principle</span></a></h2><p>There is something called SOLID design principles in Object Oriented programming. It is said that an OO programmer should always know SOLID and apply them religiously in their daily life. We are going to take a look at the L in SOLID, which like all other principles is misunderstood.</p><nav class="table-of-contents"><ul><li><a aria-current="page" href="/blogs/technology/2020/May/liskov.html#the-dreaded-liskov-substitution-principle" class="router-link-active router-link-exact-active">The Dreaded Liskov Substitution Principle</a></li><li><a aria-current="page" href="/blogs/technology/2020/May/liskov.html#how-is-solid-different-from-design-patterns-and-why-should-i-try-to-learn-it" class="router-link-active router-link-exact-active">How is SOLID different from Design Patterns and why should I try to learn it?</a></li><li><a aria-current="page" href="/blogs/technology/2020/May/liskov.html#definition-of-liskov-substitution-principle" class="router-link-active router-link-exact-active">Definition of Liskov Substitution Principle</a></li><li><a aria-current="page" href="/blogs/technology/2020/May/liskov.html#misunderstanding" class="router-link-active router-link-exact-active">Misunderstanding</a></li><li><a aria-current="page" href="/blogs/technology/2020/May/liskov.html#square-and-rectangle-problem" class="router-link-active router-link-exact-active">Square and Rectangle Problem</a><ul><li><a aria-current="page" href="/blogs/technology/2020/May/liskov.html#initial-solution" class="router-link-active router-link-exact-active">Initial Solution</a></li><li><a aria-current="page" href="/blogs/technology/2020/May/liskov.html#reflecting-on-previous-solution-and-adding-new-requirement" class="router-link-active router-link-exact-active">Reflecting on previous solution and adding new requirement</a></li><li><a aria-current="page" href="/blogs/technology/2020/May/liskov.html#intro-to-pattern-matching" class="router-link-active router-link-exact-active">Intro to Pattern Matching</a></li><li><a aria-current="page" href="/blogs/technology/2020/May/liskov.html#apply-pattern-matching-to-our-shapes-problem" class="router-link-active router-link-exact-active">Apply Pattern Matching to Our Shapes problem</a></li><li><a aria-current="page" href="/blogs/technology/2020/May/liskov.html#improving-our-solution" class="router-link-active router-link-exact-active">Improving our solution</a></li></ul></li></ul></nav><h2 id="how-is-solid-different-from-design-patterns-and-why-should-i-try-to-learn-it" tabindex="-1"><a class="header-anchor" href="#how-is-solid-different-from-design-patterns-and-why-should-i-try-to-learn-it"><span>How is SOLID different from Design Patterns and why should I try to learn it?</span></a></h2><p>When I first heard of SOLID, I thought <strong><em>&quot;I have studied a LOT of Design Patterns, there is probably NOTHING a PUNY set of 5 principles can TEACH ME&quot;</em></strong>. Okay, probably didn&#39;t exactly think like that but more or less that way. I later realised that most of the problems a software developer faces can mostly be solved just by properly applying these principles. Design patterns are important because they teach you how to deal with a certain defined problem and also write maintainable code but SOLID principles tell you how to approach any code.</p><h2 id="definition-of-liskov-substitution-principle" tabindex="-1"><a class="header-anchor" href="#definition-of-liskov-substitution-principle"><span>Definition of Liskov Substitution Principle</span></a></h2><div class="custom-container tip"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 24 24"><g fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="9"></circle><path d="M12 8h.01"></path><path d="M11 12h1v4h1"></path></g></svg><p class="custom-container-title">Definition</p><p>&quot;<em>Let <strong>Î¦(x)</strong> be a property provable about objects <strong>x</strong> of type <strong>T</strong>. Then <strong>Î¦(y)</strong> should be true for objects <strong>y</strong> of type <strong>S</strong> where <strong>S</strong> is a subtype of <strong>T</strong>.</em>&quot;</p></div><p>When I first read this, I seriously had the thought of skipping this principle. So I have tried writing it in a way that simple people like me can understand.</p><p>Consider we have 2 classes S and T such that there exists a relationship that S is a sub(child) class of T then it should always be possible to substitute instances of S wherever there are instances of T without breaking the code ie, <strong>the code should not need additional changes to accomodate S</strong>.</p><h2 id="misunderstanding" tabindex="-1"><a class="header-anchor" href="#misunderstanding"><span>Misunderstanding</span></a></h2><p>By reading the definition, you would think in strongly typed languages like Java, Scala etc. when using inheritance, the compiler will give us error if we are not conforming to the parent class. So ofcourse we would be able to substitute child class object where parent class object are used. I also read somewhere, that this principle was initially used by Ruby users as they didnt have strong typing. So this would lead us to think that there is no need for us to know further than this as the language takes care of it for us but it is not really true. Though it is true that the language will take care of checking substitution ability but we still need to take care of the runtime behaviour ourselves ðŸ˜ƒ</p><h2 id="square-and-rectangle-problem" tabindex="-1"><a class="header-anchor" href="#square-and-rectangle-problem"><span>Square and Rectangle Problem</span></a></h2><p>There is a popular example of Square and Rectangle on the internet and i would also like to use it. So, lets say we define a Rectangle class and then use <em>inheritance</em> to <em>define</em> a Square class, as &quot;<strong>Every Square is a Rectangle but not every Rectangle is a Square</strong>&quot;.</p><div class="language-scala line-numbers-mode" data-highlighter="prismjs" data-ext="scala" data-title="scala"><pre><code><span class="line"><span class="token keyword">class</span> Rectangle <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">private</span> <span class="token keyword">var</span> x<span class="token operator">:</span> <span class="token builtin">Float</span></span>
<span class="line">    <span class="token keyword">private</span> <span class="token keyword">var</span> y<span class="token operator">:</span> <span class="token builtin">Float</span></span>
<span class="line"></span>
<span class="line">    <span class="token keyword">def</span> setWidth<span class="token punctuation">(</span>x<span class="token operator">:</span> <span class="token builtin">Float</span><span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>x <span class="token operator">=</span> x</span>
<span class="line">    <span class="token keyword">def</span> setHeight<span class="token punctuation">(</span>y<span class="token operator">:</span> <span class="token builtin">Float</span><span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>y <span class="token operator">=</span> y</span>
<span class="line">    <span class="token keyword">def</span> getWidth <span class="token operator">=</span> x</span>
<span class="line">    <span class="token keyword">def</span> getHeight <span class="token operator">=</span> y</span>
<span class="line">    <span class="token keyword">def</span> getArea<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">Float</span> <span class="token operator">=</span> getHeight <span class="token operator">*</span> getWidth</span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">class</span> Square <span class="token keyword">extends</span> Rectangle<span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">private</span> <span class="token keyword">var</span> side<span class="token operator">:</span> <span class="token builtin">Int</span></span>
<span class="line"></span>
<span class="line">    <span class="token keyword">def</span> setWidtht<span class="token punctuation">(</span>x<span class="token operator">:</span> <span class="token builtin">Float</span><span class="token punctuation">)</span> <span class="token operator">=</span> side <span class="token operator">=</span> x </span>
<span class="line">    <span class="token keyword">def</span> setHeight<span class="token punctuation">(</span>y<span class="token operator">:</span> <span class="token builtin">Float</span><span class="token punctuation">)</span> <span class="token operator">=</span> side <span class="token operator">=</span> y</span>
<span class="line">    <span class="token keyword">def</span> getWidth <span class="token operator">=</span> side</span>
<span class="line">    <span class="token keyword">def</span> getHeight <span class="token operator">=</span> side</span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>So you are very happy as you have managed to represent Square in terms of Rectangle and now you can use polymorphism in code! Great!. However, soon you find that during runtime your code is failing at certain places or are seeing strange behaviour.</p><p>So lets say in some part of your code base you have code like this,</p><div class="language-scala line-numbers-mode" data-highlighter="prismjs" data-ext="scala" data-title="scala"><pre><code><span class="line">    <span class="token keyword">def</span> nextSquare<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> Rectangle <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token comment">// using subtyping to return an instance of Square as Rectangle</span></span>
<span class="line">        <span class="token keyword">val</span> side <span class="token operator">=</span> getSide<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// Some source of side like files/database or web api       </span></span>
<span class="line">        <span class="token keyword">var</span> rect <span class="token operator">=</span> <span class="token keyword">new</span> Square<span class="token punctuation">(</span><span class="token punctuation">)</span> </span>
<span class="line">        rect<span class="token punctuation">.</span>setWidth<span class="token punctuation">(</span>x<span class="token punctuation">)</span></span>
<span class="line">        rect</span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>and in some other part you have code like this,</p><div class="language-scala line-numbers-mode" data-highlighter="prismjs" data-ext="scala" data-title="scala"><pre><code><span class="line">    <span class="token keyword">def</span> adjust<span class="token punctuation">(</span>list<span class="token operator">:</span> List<span class="token punctuation">[</span>Rectangle<span class="token punctuation">]</span><span class="token punctuation">,</span> factor<span class="token operator">:</span> <span class="token builtin">Float</span><span class="token punctuation">)</span><span class="token operator">:</span> List<span class="token punctuation">[</span>Rectangle<span class="token punctuation">]</span> <span class="token operator">=</span> list<span class="token punctuation">.</span>map<span class="token punctuation">(</span>rect <span class="token keyword">=&gt;</span> getAdjustedRectangle<span class="token punctuation">(</span>rect<span class="token punctuation">,</span> factor<span class="token punctuation">)</span><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line">    <span class="token comment">//code that will adjust the height and the width differently</span></span>
<span class="line">    <span class="token keyword">def</span> getAdjustedRectangle<span class="token punctuation">(</span>rect<span class="token operator">:</span> Rectangle<span class="token punctuation">,</span> factor<span class="token operator">:</span> <span class="token builtin">Float</span><span class="token punctuation">)</span><span class="token operator">:</span> Rectangle <span class="token operator">=</span> <span class="token punctuation">{</span></span>
<span class="line">        rect<span class="token punctuation">.</span>setHeight<span class="token punctuation">(</span>rect<span class="token punctuation">.</span>getHeight <span class="token operator">*</span> factor<span class="token punctuation">)</span></span>
<span class="line">        rect<span class="token punctuation">.</span>setWidth<span class="token punctuation">(</span>rect<span class="token punctuation">.</span>getWidth <span class="token operator">*</span> <span class="token punctuation">(</span><span class="token number">1.0</span> <span class="token operator">-</span> factor<span class="token punctuation">)</span><span class="token punctuation">)</span></span>
<span class="line">        rect</span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>The caller of the code is expecting the getAdjustedRectangle method to adjust the rectangle in both axis by different factors. It doesnt know its a instance of Square or a pure rectangle. Since the square is having only one side, so at <code>rect.setWidth(rect.getWidth * (1.0 - factor))</code> it is getting overriden by this and there is loss of value of height.</p><p>This behaviour violates the Liskov Substitution Principle as it presents unexpected behaviour. To solve this you think of a solution,</p><div class="language-scala line-numbers-mode" data-highlighter="prismjs" data-ext="scala" data-title="scala"><pre><code><span class="line">   <span class="token keyword">def</span> adjust<span class="token punctuation">(</span>list<span class="token operator">:</span> List<span class="token punctuation">[</span>Rectangle<span class="token punctuation">]</span><span class="token punctuation">,</span> factor<span class="token operator">:</span> <span class="token builtin">Float</span><span class="token punctuation">)</span> <span class="token operator">=</span> list<span class="token punctuation">.</span>map<span class="token punctuation">(</span>rect <span class="token keyword">=&gt;</span> <span class="token punctuation">{</span></span>
<span class="line">       <span class="token keyword">if</span><span class="token punctuation">(</span>rect<span class="token punctuation">.</span>isInstanceOf<span class="token punctuation">[</span>Square<span class="token punctuation">]</span><span class="token punctuation">)</span> getAdjustedSquare<span class="token punctuation">(</span>rect<span class="token punctuation">.</span>asInstanceOf<span class="token punctuation">[</span>Square<span class="token punctuation">]</span><span class="token punctuation">,</span> factor<span class="token punctuation">)</span></span>
<span class="line">       <span class="token keyword">else</span> getAdjustedRectangle<span class="token punctuation">(</span>rect<span class="token punctuation">,</span> factor<span class="token punctuation">)</span></span>
<span class="line">   <span class="token punctuation">}</span><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">//You asked some domain expert how should the side of a square change and he said simply multiply by factor and not 1-factor</span></span>
<span class="line">   <span class="token keyword">def</span> getAdjustedSquare<span class="token punctuation">(</span>square<span class="token operator">:</span> Square<span class="token punctuation">,</span> factor<span class="token operator">:</span> <span class="token builtin">Float</span><span class="token punctuation">)</span><span class="token operator">:</span> Rectangle <span class="token operator">=</span> <span class="token punctuation">{</span></span>
<span class="line">     square<span class="token punctuation">.</span>setHeight<span class="token punctuation">(</span>square<span class="token punctuation">.</span>getHeight <span class="token operator">*</span> factor<span class="token punctuation">)</span> </span>
<span class="line">   <span class="token punctuation">}</span> </span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>As a fast work around you have checked if the rectangle is a instance of square but you are still violating the principle by introducing special code to handle this <em>breaking</em> behaviour ðŸ˜ƒ</p><h3 id="initial-solution" tabindex="-1"><a class="header-anchor" href="#initial-solution"><span>Initial Solution</span></a></h3><p>So what can you do??? How can you solve this shizzle?? Well one of the most popular <a href="https://stackoverflow.com/questions/56860/what-is-an-example-of-the-liskov-substitution-principle" target="_blank" rel="noopener noreferrer">stackoverflow answer<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a> for this suggest that we should model our class according to behaviour and not according to data properties. We modeled our classes to satisfy the mathematical model that &quot;<strong>Every Square is a Rectangle but not every Rectangle is a Square</strong>&quot; which leads us to this mess.</p><p>So let&#39;s try to solve this problem. This is my take on this and people might have different solutions.</p><p>So the core of the problem is our class modelling. So let us ask the question on what basis do we model our class? Domain or Mathemetical model or mostly people just go with the flow and change the code ad-hoc. I think we should try to design our classes according to behaviour and to know the behaviour a class should posses we should look at the requirement spec.</p><p>Lets say the spec says,</p><ul><li>Shapes are needed for a drawing application.</li><li>We only have demand for square, rectangle and circle for now.</li><li>Squares, rectangle must have ability to invert color.</li></ul><p>So lets start coding, let us define our abstract things for behaviours first.</p><div class="language-scala line-numbers-mode" data-highlighter="prismjs" data-ext="scala" data-title="scala"><pre><code><span class="line"><span class="token comment">//since its a drawing application shape will need to be drawable and have color within shape itself instead of defining</span></span>
<span class="line"><span class="token comment">//sub type like drawableShape, ColorableShape etc. (As I said before lets follow the spec)</span></span>
<span class="line"><span class="token keyword">abstract</span> <span class="token keyword">class</span> Shape <span class="token keyword">extends</span> Colorable <span class="token keyword">with</span> Drawable  <span class="token punctuation">{</span></span>
<span class="line">  <span class="token keyword">def</span> area<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">Double</span></span>
<span class="line">  <span class="token keyword">def</span> perimeter<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">Double</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">// traits are like interfaces in java</span></span>
<span class="line"><span class="token comment">//Colorable method can be taken inside Drawable itself, I separated them</span></span>
<span class="line"><span class="token keyword">trait</span> Drawable<span class="token punctuation">{</span></span>
<span class="line">  <span class="token keyword">def</span> draw<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">Unit</span> <span class="token comment">// Unit represents no returns, jugaad for Void return type in scala</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">trait</span> Colorable<span class="token punctuation">{</span></span>
<span class="line">  <span class="token keyword">def</span> color<span class="token operator">:</span> Color</span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">trait</span> ColorInvertor <span class="token punctuation">{</span></span>
<span class="line">  <span class="token keyword">def</span> invert<span class="token punctuation">(</span>color<span class="token operator">:</span> Color<span class="token punctuation">)</span><span class="token operator">:</span> Color</span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">trait</span> ColorInvertible<span class="token punctuation">[</span>S<span class="token punctuation">]</span> <span class="token punctuation">{</span> <span class="token comment">// will be inherited by shaped classes</span></span>
<span class="line">  <span class="token keyword">def</span> invert<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> S <span class="token comment">// immmutable, so whenever this is called, create a new instance of Shape with inverted color</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">abstract</span> <span class="token keyword">class</span> FourEdgedShape <span class="token keyword">extends</span> Shape <span class="token keyword">with</span> ColorInvertible<span class="token punctuation">[</span>Shape<span class="token punctuation">]</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>The code above is self explanatory. Now, let us define our classes that will define data.</p><div class="language-scala line-numbers-mode" data-highlighter="prismjs" data-ext="scala" data-title="scala"><pre><code><span class="line"><span class="token keyword">sealed</span> <span class="token keyword">abstract</span> <span class="token keyword">class</span> ShapeDS</span>
<span class="line"><span class="token comment">// Data classes, case classes are immutable in nature. Once set you cannot change, unless you use var variables which is not recommended.</span></span>
<span class="line"><span class="token keyword">case</span> <span class="token keyword">class</span> RectangleDS<span class="token punctuation">(</span>height<span class="token operator">:</span> <span class="token builtin">Int</span><span class="token punctuation">,</span> width<span class="token operator">:</span> <span class="token builtin">Int</span><span class="token punctuation">)</span> <span class="token keyword">extends</span> ShapeDS</span>
<span class="line"><span class="token keyword">case</span> <span class="token keyword">class</span> SquareDS<span class="token punctuation">(</span>side<span class="token operator">:</span> <span class="token builtin">Int</span><span class="token punctuation">)</span> <span class="token keyword">extends</span> ShapeDS</span>
<span class="line"><span class="token keyword">case</span> <span class="token keyword">class</span> AxisDS<span class="token punctuation">(</span>foci<span class="token operator">:</span> <span class="token builtin">Int</span><span class="token punctuation">,</span> length<span class="token operator">:</span> <span class="token builtin">Int</span><span class="token punctuation">)</span> <span class="token keyword">extends</span> ShapeDS</span>
<span class="line"></span>
<span class="line"><span class="token comment">//Color Data</span></span>
<span class="line"><span class="token keyword">case</span> <span class="token keyword">class</span> Color<span class="token punctuation">(</span>r<span class="token operator">:</span> <span class="token builtin">Int</span><span class="token punctuation">,</span> b<span class="token operator">:</span> <span class="token builtin">Int</span><span class="token punctuation">,</span> g<span class="token operator">:</span> <span class="token builtin">Int</span><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Finally we can provide concrete implementations to our abstract classes/traits.</p><div class="language-scala line-numbers-mode" data-highlighter="prismjs" data-ext="scala" data-title="scala"><pre><code><span class="line"><span class="token keyword">case</span> <span class="token keyword">class</span> Rectangle<span class="token punctuation">(</span>rect<span class="token operator">:</span> RectangleDS<span class="token punctuation">,</span> color<span class="token operator">:</span> Color<span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token keyword">implicit</span> inverter<span class="token operator">:</span> ColorInvertor<span class="token punctuation">)</span> <span class="token keyword">extends</span> FourEdgedShape <span class="token punctuation">{</span></span>
<span class="line">  <span class="token keyword">def</span> area<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span> rect<span class="token punctuation">.</span>height <span class="token operator">*</span> rect<span class="token punctuation">.</span>width</span>
<span class="line">  <span class="token keyword">def</span> perimeter<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">Double</span> <span class="token operator">=</span> <span class="token number">2</span> <span class="token operator">*</span> <span class="token punctuation">(</span>rect<span class="token punctuation">.</span>width <span class="token operator">+</span> rect<span class="token punctuation">.</span>height<span class="token punctuation">)</span></span>
<span class="line">  <span class="token keyword">def</span> draw<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span> println<span class="token punctuation">(</span><span class="token string-interpolation"><span class="token id function">s</span><span class="token string">&quot;Drawing Rectangle </span><span class="token interpolation"><span class="token punctuation">${</span><span class="token expression">rect</span><span class="token punctuation">}</span></span><span class="token string"> with color </span><span class="token interpolation"><span class="token punctuation">${</span><span class="token expression">color</span><span class="token punctuation">}</span></span><span class="token string">&quot;</span></span><span class="token punctuation">)</span></span>
<span class="line">  <span class="token keyword">def</span> invert<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> Rectangle <span class="token operator">=</span> copy<span class="token punctuation">(</span>color <span class="token operator">=</span> inverter<span class="token punctuation">.</span>invert<span class="token punctuation">(</span>color<span class="token punctuation">)</span><span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">case</span> <span class="token keyword">class</span> Square<span class="token punctuation">(</span>square<span class="token operator">:</span> SquareDS<span class="token punctuation">,</span> color<span class="token operator">:</span> Color<span class="token punctuation">)</span><span class="token punctuation">(</span> <span class="token keyword">implicit</span> inverter<span class="token operator">:</span> ColorInvertor<span class="token punctuation">)</span> <span class="token keyword">extends</span> FourEdgedShape <span class="token punctuation">{</span></span>
<span class="line">  <span class="token keyword">def</span> area<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span> square<span class="token punctuation">.</span>side <span class="token operator">*</span> square<span class="token punctuation">.</span>side</span>
<span class="line">  <span class="token keyword">def</span> perimeter<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">Double</span> <span class="token operator">=</span> <span class="token number">4</span> <span class="token operator">*</span> square<span class="token punctuation">.</span>side</span>
<span class="line">  <span class="token keyword">def</span> draw<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span> println<span class="token punctuation">(</span><span class="token string-interpolation"><span class="token id function">s</span><span class="token string">&quot;Drawing Square </span><span class="token interpolation"><span class="token punctuation">${</span><span class="token expression">square</span><span class="token punctuation">}</span></span><span class="token string"> with color </span><span class="token interpolation"><span class="token punctuation">${</span><span class="token expression">color</span><span class="token punctuation">}</span></span><span class="token string">&quot;</span></span><span class="token punctuation">)</span></span>
<span class="line">  <span class="token keyword">def</span> invert<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> Square <span class="token operator">=</span> copy<span class="token punctuation">(</span>color <span class="token operator">=</span> inverter<span class="token punctuation">.</span>invert<span class="token punctuation">(</span>color<span class="token punctuation">)</span><span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">case</span> <span class="token keyword">class</span> Circle<span class="token punctuation">(</span>axis<span class="token operator">:</span> AxisDS<span class="token punctuation">,</span> color<span class="token operator">:</span> Color<span class="token punctuation">)</span> <span class="token keyword">extends</span> Shape <span class="token punctuation">{</span></span>
<span class="line">  <span class="token keyword">def</span> area<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span> Math<span class="token punctuation">.</span>PI <span class="token operator">*</span> axis<span class="token punctuation">.</span>length <span class="token operator">*</span> axis<span class="token punctuation">.</span>length</span>
<span class="line">  <span class="token keyword">def</span> perimeter<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token number">2</span> <span class="token operator">*</span> Math<span class="token punctuation">.</span>PI <span class="token operator">*</span> axis<span class="token punctuation">.</span>length</span>
<span class="line">  <span class="token keyword">def</span> draw<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span> println<span class="token punctuation">(</span><span class="token string-interpolation"><span class="token id function">s</span><span class="token string">&quot;Drawing Circle </span><span class="token interpolation"><span class="token punctuation">${</span><span class="token expression">axis</span><span class="token punctuation">}</span></span><span class="token string"> with color </span><span class="token interpolation"><span class="token punctuation">${</span><span class="token expression">color</span><span class="token punctuation">}</span></span><span class="token string">&quot;</span></span><span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Now lets write our main class for doing some testing.</p><div class="language-scala line-numbers-mode" data-highlighter="prismjs" data-ext="scala" data-title="scala"><pre><code><span class="line"><span class="token comment">// Main Class for testing</span></span>
<span class="line"><span class="token keyword">object</span> LiskovTest <span class="token punctuation">{</span></span>
<span class="line"></span>
<span class="line">  <span class="token comment">//Dont worry about the implicit keyword, it just means pass this variable wherever it is required implicitly, the compiler will do the</span></span>
<span class="line">  <span class="token comment">//work of figuring this out</span></span>
<span class="line">  <span class="token keyword">implicit</span> <span class="token keyword">val</span> stdColorInverter<span class="token operator">:</span> ColorInvertor <span class="token operator">=</span>  <span class="token keyword">new</span> ColorInvertor <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">override</span> <span class="token keyword">def</span> invert<span class="token punctuation">(</span>color<span class="token operator">:</span> Color<span class="token punctuation">)</span><span class="token operator">:</span> Color <span class="token operator">=</span> Color<span class="token punctuation">(</span>r <span class="token operator">=</span> <span class="token number">255</span> <span class="token operator">-</span> color<span class="token punctuation">.</span>r<span class="token punctuation">,</span> g <span class="token operator">=</span> <span class="token number">255</span> <span class="token operator">-</span> color<span class="token punctuation">.</span>g<span class="token punctuation">,</span> b <span class="token operator">=</span> <span class="token number">255</span><span class="token operator">-</span> color<span class="token punctuation">.</span>b<span class="token punctuation">)</span></span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">  <span class="token keyword">def</span> main<span class="token punctuation">(</span>args<span class="token operator">:</span> Array<span class="token punctuation">[</span><span class="token builtin">String</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">Unit</span> <span class="token operator">=</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">val</span> color <span class="token operator">=</span> Color<span class="token punctuation">(</span><span class="token number">210</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span></span>
<span class="line">    <span class="token comment">//instantiating sub class objects</span></span>
<span class="line">    <span class="token keyword">val</span> rect <span class="token operator">=</span> Rectangle<span class="token punctuation">(</span>RectangleDS<span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">12</span><span class="token punctuation">)</span><span class="token punctuation">,</span> color<span class="token punctuation">)</span></span>
<span class="line">    <span class="token keyword">val</span> square <span class="token operator">=</span> Square<span class="token punctuation">(</span>SquareDS<span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">,</span> color<span class="token punctuation">)</span></span>
<span class="line">    <span class="token keyword">val</span> circle <span class="token operator">=</span> Circle<span class="token punctuation">(</span>AxisDS<span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">,</span> color<span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line">    <span class="token comment">// Standard polymorphism method accepts Shape, so child classes are implicitly cast to Shape</span></span>
<span class="line">    printShapes<span class="token punctuation">(</span>rect<span class="token punctuation">,</span> square<span class="token punctuation">,</span> circle<span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line">    printFourEdged<span class="token punctuation">(</span>rect<span class="token punctuation">,</span> square<span class="token punctuation">)</span></span>
<span class="line">    <span class="token comment">//Below line will not compile as circle is not FourEdgedShape</span></span>
<span class="line">    <span class="token comment">//    printFourEdged(rect, square, circle)</span></span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">  <span class="token comment">//helper methods</span></span>
<span class="line">  <span class="token keyword">def</span> printShapes<span class="token punctuation">(</span>shapeList<span class="token operator">:</span> Shape<span class="token operator">*</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">Unit</span> <span class="token operator">=</span> shapeList<span class="token punctuation">.</span>map<span class="token punctuation">(</span>printArea<span class="token punctuation">)</span><span class="token punctuation">.</span>foreach<span class="token punctuation">(</span>println<span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line">  <span class="token keyword">def</span> printArea<span class="token punctuation">(</span>shape<span class="token operator">:</span> Shape<span class="token punctuation">)</span><span class="token operator">:</span> Shape <span class="token operator">=</span> <span class="token punctuation">{</span></span>
<span class="line">    println<span class="token punctuation">(</span>shape<span class="token punctuation">.</span>area<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span></span>
<span class="line">    shape</span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">  <span class="token keyword">def</span> printFourEdged<span class="token punctuation">(</span>fourEdgedList<span class="token operator">:</span> FourEdgedShape<span class="token operator">*</span> <span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">Unit</span> <span class="token operator">=</span> fourEdgedList<span class="token punctuation">.</span>map<span class="token punctuation">(</span>_<span class="token punctuation">.</span>invert<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span>foreach<span class="token punctuation">(</span>println<span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>The code may not light any bulbs in your mind and may seem obvious as you read, which maybe a good thing as it suggests clarity in code.</p><h3 id="reflecting-on-previous-solution-and-adding-new-requirement" tabindex="-1"><a class="header-anchor" href="#reflecting-on-previous-solution-and-adding-new-requirement"><span>Reflecting on previous solution and adding new requirement</span></a></h3><p>Okay, lets recap some things. What advantages does the current model gives us? We have defined Shape with abstract methods like <code>def area(): Double</code> , <code>def perimeter(): Double</code> ,<code>def draw(): Unit</code>. We have separated our behaviour and data i.e, we have not embedded fields like height/width in Rectangle class itself. Imagine if there was a requirement to add a new field now, say <code>center</code> and even though the field is there in the shape object, there is no logic to do anything with the field in shape object itself. Instead some higher level code, lets say the UI wants it for displaying it correctly.</p><p>Also it can happen that it wont end here, there maybe other fields added to the shape object that have nothing to do with logic in shape object itself. This is a commmon occurence in software development as requirements change and we have to adapt. This may eventually lead to the shape object becoming a <strong>GOD</strong> object and will need to change with every requirment and may also be a source for many bugs, with every change and bug you have to write test cases, test this class and all the dependent classes too and this becomes quite a headache for software developers as the code becomes difficult to maintain and eventually when there is a new change nobody wants to touch this class as it may break some other thing ðŸ˜­. The fix to this falls under another principle called Single Responsibility Principle.</p><p>Ok so lets get back to the shape example. Uptill now our code obeys the LSP, there is no breaking change in behaviour of sub types. Lets add a requirement. Shapes should be adjustable, ie, we should be be able to manipulate their dimensions.</p><p>There are 2 ways to go about this.</p><ul><li>take a <code>factor : Float</code> and get new dimensions by multiplying it to <em>some</em> or <em>all</em> the dimensions of shape object.</li><li>take delta change from the user for each dimension, which may increase/decrease particular dimensions.</li></ul><p>If we take the 1st approach, we can make a generic method on the Shape abstract class that accepts a factor and returns a new Shape Object after adjusting but if we take the 2nd approach then we need to think about how to accept different dimensions for a Concrete Shape object but still define a generic method in Shape Object.</p><p>Is the 2nd approach possible? Atleast from what I researched, there isnt a compile time friendly way to do this. We can try a modified version of Visitor pattern that accepts visitor of 2 arguments but that is not at all elegant. Lets fallback to runtime and look at other ways.</p><h3 id="intro-to-pattern-matching" tabindex="-1"><a class="header-anchor" href="#intro-to-pattern-matching"><span>Intro to Pattern Matching</span></a></h3><p>Lets say we define a adjust method like below</p><div class="language-scala line-numbers-mode" data-highlighter="prismjs" data-ext="scala" data-title="scala"><pre><code><span class="line"><span class="token keyword">abstract</span> <span class="token keyword">class</span> Shape <span class="token keyword">extends</span> Colorable <span class="token keyword">with</span> Drawable  <span class="token punctuation">{</span></span>
<span class="line">  <span class="token keyword">def</span> area<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">Double</span></span>
<span class="line">  <span class="token keyword">def</span> perimeter<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">Double</span></span>
<span class="line">  <span class="token keyword">def</span> adjust<span class="token punctuation">(</span>ds<span class="token operator">:</span> ShapeDS<span class="token punctuation">)</span> <span class="token operator">:</span> Shape</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>We didnt talk about the ShapeDS class before. Taking a look at the signature it is, <code>sealed abstract class ShapeDS</code> and it has no content. So what use is this class? since there are no methods defined on it, its practically useless as a superclass. There is only one use for it and that is <strong>Type Safety</strong>, it is also called a marker interface, since it has no methods and can only be used to <em>mark</em> a sub class. For it be truly useful we need to know the type of subclass.</p><p>To know sub type in language like scala there is a concept of <strong>Pattern Matching</strong>. Let&#39;s quickly understand it by a example.</p><div class="language-scala line-numbers-mode" data-highlighter="prismjs" data-ext="scala" data-title="scala"><pre><code><span class="line"><span class="token keyword">object</span> Main <span class="token punctuation">{</span></span>
<span class="line">  <span class="token keyword">sealed</span> <span class="token keyword">trait</span> Animal</span>
<span class="line">  <span class="token keyword">trait</span> Pet <span class="token keyword">extends</span> Animal</span>
<span class="line">  <span class="token keyword">trait</span> Wild <span class="token keyword">extends</span> Animal</span>
<span class="line"></span>
<span class="line">  <span class="token keyword">case</span> <span class="token keyword">class</span> Dog<span class="token punctuation">(</span>name<span class="token punctuation">)</span> <span class="token keyword">extends</span> Pet</span>
<span class="line">  <span class="token keyword">case</span> <span class="token keyword">class</span> Tiger<span class="token punctuation">(</span>name<span class="token punctuation">)</span> <span class="token keyword">extends</span> Wild</span>
<span class="line"></span>
<span class="line highlighted">  <span class="token keyword">def</span> handleAnimal<span class="token punctuation">(</span>animal<span class="token operator">:</span> Animal<span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">Unit</span> <span class="token operator">=</span> <span class="token punctuation">{</span></span>
<span class="line">    animal <span class="token keyword">match</span> <span class="token punctuation">{</span></span>
<span class="line highlighted">      <span class="token keyword">case</span> Dog<span class="token punctuation">(</span>name<span class="token punctuation">)</span> <span class="token keyword">=&gt;</span> println<span class="token punctuation">(</span><span class="token string-interpolation"><span class="token id function">s</span><span class="token string">&quot;Take </span><span class="token interpolation"><span class="token punctuation">$</span><span class="token expression">name</span></span><span class="token string"> for a walk&quot;</span></span><span class="token punctuation">)</span></span>
<span class="line">      </span>
<span class="line highlighted">      <span class="token keyword">case</span> Tiger<span class="token punctuation">(</span>name<span class="token punctuation">)</span> <span class="token keyword">=&gt;</span> println<span class="token punctuation">(</span><span class="token string-interpolation"><span class="token id function">s</span><span class="token string">&quot;Do not approach </span><span class="token interpolation"><span class="token punctuation">$</span><span class="token expression">name</span></span><span class="token string">, watch from afar.&quot;</span></span><span class="token punctuation">)</span></span>
<span class="line">      </span>
<span class="line">      <span class="token keyword">case</span> _ <span class="token keyword">=&gt;</span> </span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>We have defined a method <code>def handleAnimal(animal: Animal):Unit</code>, which takes in a instance of Animal and returns Unit. For the uninformed, Unit in scala means a function does not return anything. Inside the method we check if animal matches with instance of Dog or Animal and perform logic accordingly. It is similar to using instanceof method for checking instance type but pattern matching in scala comes with compile time safety. In Java there is nothing stopping you from checking if an Integer is instanceOf String but in scala this will throw a compile time error.</p><p>Pattern matching is very powerful and is used very heavily in Scala. In its most primitive definition it can be seen as like instanceof operator the <code>match</code> keyword with the <code>case</code> keyword is checking for instanceof Dog/Tiger and doing some logic with Dog/Tiger instance.</p><div class="custom-container tip"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 24 24"><g fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="9"></circle><path d="M12 8h.01"></path><path d="M11 12h1v4h1"></path></g></svg><p class="custom-container-title">Remember</p><p>The main benefit of pattern matching is that it provides compile time safety as compared to simply using instanceOf methods.</p></div><h3 id="apply-pattern-matching-to-our-shapes-problem" tabindex="-1"><a class="header-anchor" href="#apply-pattern-matching-to-our-shapes-problem"><span>Apply Pattern Matching to Our Shapes problem</span></a></h3><p>So let&#39;s change our code to use Pattern Matching. I am only showing changes for Rectangle class as others are similar.</p><div class="language-scala line-numbers-mode" data-highlighter="prismjs" data-ext="scala" data-title="scala"><pre><code><span class="line"><span class="token comment">//Add a adjust method that accepts a ShapeDS and returns a Shape</span></span>
<span class="line"><span class="token keyword">abstract</span> <span class="token keyword">class</span> Shape <span class="token keyword">extends</span> Colorable <span class="token keyword">with</span> Drawable  <span class="token punctuation">{</span></span>
<span class="line">  <span class="token keyword">def</span> area<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">Double</span></span>
<span class="line">  <span class="token keyword">def</span> perimeter<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">Double</span></span>
<span class="line">  <span class="token keyword">def</span> adjust<span class="token punctuation">(</span>delta<span class="token operator">:</span> ShapeDS<span class="token punctuation">)</span><span class="token operator">:</span> Shape</span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span class="token keyword">case</span> <span class="token keyword">class</span> Rectangle<span class="token punctuation">(</span>rect<span class="token operator">:</span> RectangleDS<span class="token punctuation">,</span> color<span class="token operator">:</span> Color<span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token keyword">implicit</span> inverter<span class="token operator">:</span> ColorInvertor<span class="token punctuation">)</span> <span class="token keyword">extends</span> FourEdgedShape <span class="token punctuation">{</span></span>
<span class="line">  <span class="token keyword">def</span> area<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span> rect<span class="token punctuation">.</span>height <span class="token operator">*</span> rect<span class="token punctuation">.</span>width</span>
<span class="line">  <span class="token keyword">def</span> perimeter<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">Double</span> <span class="token operator">=</span> <span class="token number">2</span> <span class="token operator">*</span> <span class="token punctuation">(</span>rect<span class="token punctuation">.</span>width <span class="token operator">+</span> rect<span class="token punctuation">.</span>height<span class="token punctuation">)</span></span>
<span class="line">  <span class="token keyword">def</span> draw<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span> println<span class="token punctuation">(</span><span class="token string-interpolation"><span class="token id function">s</span><span class="token string">&quot;Drawing Rectangle </span><span class="token interpolation"><span class="token punctuation">${</span><span class="token expression">rect</span><span class="token punctuation">}</span></span><span class="token string"> with color </span><span class="token interpolation"><span class="token punctuation">${</span><span class="token expression">color</span><span class="token punctuation">}</span></span><span class="token string">&quot;</span></span><span class="token punctuation">)</span></span>
<span class="line">  <span class="token keyword">def</span> invert<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> Rectangle <span class="token operator">=</span> copy<span class="token punctuation">(</span>color <span class="token operator">=</span> inverter<span class="token punctuation">.</span>invert<span class="token punctuation">(</span>color<span class="token punctuation">)</span><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line"><span class="token comment">//check to see if shape DS is matching with current Shape if not throw exception otherwise, adjust and return adjusted Shape</span></span>
<span class="line">  <span class="token keyword">def</span> adjust<span class="token punctuation">(</span>delta<span class="token operator">:</span> ShapeDS<span class="token punctuation">)</span><span class="token operator">:</span> Rectangle <span class="token operator">=</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">val</span> newDS <span class="token operator">=</span> delta <span class="token keyword">match</span> <span class="token punctuation">{</span></span>
<span class="line">      <span class="token keyword">case</span> RectangleDS<span class="token punctuation">(</span>height<span class="token punctuation">,</span> width<span class="token punctuation">)</span> <span class="token keyword">=&gt;</span> RectangleDS<span class="token punctuation">(</span>rect<span class="token punctuation">.</span>height <span class="token operator">+</span> height<span class="token punctuation">,</span> rect<span class="token punctuation">.</span>width <span class="token operator">+</span> width<span class="token punctuation">)</span></span>
<span class="line">      <span class="token keyword">case</span> _ <span class="token keyword">=&gt;</span> <span class="token keyword">throw</span> <span class="token keyword">new</span> IllegalArgumentException<span class="token punctuation">(</span><span class="token string">&quot;Expected delta of type RectangleDS&quot;</span><span class="token punctuation">)</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line">    copy<span class="token punctuation">(</span>rect <span class="token operator">=</span> newDS<span class="token punctuation">)</span></span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Usually when pattern matching is used it covers the entire range of sub types unlike what we did here by just using one sub type each time.</p><p>So you might want to spit on my face and say earlier I condemed using rect.isInstanceOf[Square]. Yes it is true because it breaks the behaviour of sub classes amd YES it breaks in our above example too. <strong>Infact you can pass a AxisDS type in a Rectangle Shape without compile time error...which is really bad</strong>. So what I am saying is, sometimes it is OK to break the LSP principle ðŸ˜›. Yes it is true, you should treat a principle as a guideline, if it doesnt suit your use case then you may need to break it.</p><p>But we can definitely improve upon this solution as I cant figure out why we would want a generic method at the Shape abstract level because the client will also have to provide the appropriate DS object to the Shape object ðŸ˜¡, probably it would also need to check the type of shape object using pattern matching? If this is the case then we might as well define our adjust method at the individual shape level and enjoy the benifit of type safety and pattern matching.</p><h3 id="improving-our-solution" tabindex="-1"><a class="header-anchor" href="#improving-our-solution"><span>Improving our solution</span></a></h3><p>Lets transfer adjust method to its own trait.</p><div class="language-scala line-numbers-mode" data-highlighter="prismjs" data-ext="scala" data-title="scala"><pre><code><span class="line">  <span class="token keyword">abstract</span> <span class="token keyword">class</span> Shape <span class="token keyword">extends</span> Colorable <span class="token keyword">with</span> Drawable  <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">def</span> area<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">Double</span></span>
<span class="line">    <span class="token keyword">def</span> perimeter<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">Double</span></span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">  <span class="token comment">// dont worry about the plus/minus signs they dont really affect our solution.</span></span>
<span class="line">  <span class="token keyword">trait</span> Adjustable<span class="token punctuation">[</span><span class="token operator">-</span>ShapeDS<span class="token punctuation">,</span> <span class="token operator">+</span>Shape<span class="token punctuation">]</span><span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">def</span> adjust<span class="token punctuation">(</span>ds <span class="token operator">:</span> ShapeDS<span class="token punctuation">)</span><span class="token operator">:</span> Shape</span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Now lets define adjust method at individual Shape level</p><div class="language-scala line-numbers-mode" data-highlighter="prismjs" data-ext="scala" data-title="scala"><pre><code><span class="line"><span class="token keyword">case</span> <span class="token keyword">class</span> Rectangle<span class="token punctuation">(</span>rect<span class="token operator">:</span> RectangleDS<span class="token punctuation">,</span> color<span class="token operator">:</span> Color<span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token keyword">implicit</span> inverter<span class="token operator">:</span> ColorInvertor<span class="token punctuation">)</span> <span class="token keyword">extends</span> FourEdgedShape <span class="token keyword">with</span> Adjustable<span class="token punctuation">[</span>RectangleDS<span class="token punctuation">,</span>Rectangle<span class="token punctuation">]</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token keyword">def</span> area<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span> rect<span class="token punctuation">.</span>height <span class="token operator">*</span> rect<span class="token punctuation">.</span>width</span>
<span class="line">  <span class="token keyword">def</span> perimeter<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">Double</span> <span class="token operator">=</span> <span class="token number">2</span> <span class="token operator">*</span> <span class="token punctuation">(</span>rect<span class="token punctuation">.</span>width <span class="token operator">+</span> rect<span class="token punctuation">.</span>height<span class="token punctuation">)</span></span>
<span class="line">  <span class="token keyword">def</span> draw<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span> println<span class="token punctuation">(</span><span class="token string-interpolation"><span class="token id function">s</span><span class="token string">&quot;Drawing Rectangle </span><span class="token interpolation"><span class="token punctuation">${</span><span class="token expression">rect</span><span class="token punctuation">}</span></span><span class="token string"> with color </span><span class="token interpolation"><span class="token punctuation">${</span><span class="token expression">color</span><span class="token punctuation">}</span></span><span class="token string">&quot;</span></span><span class="token punctuation">)</span></span>
<span class="line">  <span class="token keyword">def</span> invert<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> Rectangle <span class="token operator">=</span> copy<span class="token punctuation">(</span>color <span class="token operator">=</span> inverter<span class="token punctuation">.</span>invert<span class="token punctuation">(</span>color<span class="token punctuation">)</span><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line highlighted">  <span class="token keyword">override</span> <span class="token keyword">def</span> adjust<span class="token punctuation">(</span>ds<span class="token operator">:</span> RectangleDS<span class="token punctuation">)</span><span class="token operator">:</span> Rectangle <span class="token operator">=</span> copy<span class="token punctuation">(</span>rect <span class="token operator">=</span> RectangleDS<span class="token punctuation">(</span>rect<span class="token punctuation">.</span>height <span class="token operator">+</span> ds<span class="token punctuation">.</span>height<span class="token punctuation">,</span> rect<span class="token punctuation">.</span>width <span class="token operator">+</span> ds<span class="token punctuation">.</span>width<span class="token punctuation">)</span><span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">case</span> <span class="token keyword">class</span> Square<span class="token punctuation">(</span>square<span class="token operator">:</span> SquareDS<span class="token punctuation">,</span> color<span class="token operator">:</span> Color<span class="token punctuation">)</span><span class="token punctuation">(</span> <span class="token keyword">implicit</span> inverter<span class="token operator">:</span> ColorInvertor<span class="token punctuation">)</span> <span class="token keyword">extends</span> FourEdgedShape <span class="token keyword">with</span> Adjustable<span class="token punctuation">[</span>SquareDS<span class="token punctuation">,</span>Square<span class="token punctuation">]</span> <span class="token punctuation">{</span></span>
<span class="line">  <span class="token keyword">def</span> area<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span> square<span class="token punctuation">.</span>side <span class="token operator">*</span> square<span class="token punctuation">.</span>side</span>
<span class="line">  <span class="token keyword">def</span> perimeter<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">Double</span> <span class="token operator">=</span> <span class="token number">4</span> <span class="token operator">*</span> square<span class="token punctuation">.</span>side</span>
<span class="line">  <span class="token keyword">def</span> draw<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span> println<span class="token punctuation">(</span><span class="token string-interpolation"><span class="token id function">s</span><span class="token string">&quot;Drawing Square </span><span class="token interpolation"><span class="token punctuation">${</span><span class="token expression">square</span><span class="token punctuation">}</span></span><span class="token string"> with color </span><span class="token interpolation"><span class="token punctuation">${</span><span class="token expression">color</span><span class="token punctuation">}</span></span><span class="token string">&quot;</span></span><span class="token punctuation">)</span></span>
<span class="line">  <span class="token keyword">def</span> invert<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> Square <span class="token operator">=</span> copy<span class="token punctuation">(</span>color <span class="token operator">=</span> inverter<span class="token punctuation">.</span>invert<span class="token punctuation">(</span>color<span class="token punctuation">)</span><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line highlighted">  <span class="token keyword">override</span> <span class="token keyword">def</span> adjust<span class="token punctuation">(</span>ds<span class="token operator">:</span> SquareDS<span class="token punctuation">)</span><span class="token operator">:</span> Square <span class="token operator">=</span> copy<span class="token punctuation">(</span>square <span class="token operator">=</span> SquareDS<span class="token punctuation">(</span>square<span class="token punctuation">.</span>side <span class="token operator">+</span> ds<span class="token punctuation">.</span>side<span class="token punctuation">)</span><span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">case</span> <span class="token keyword">class</span> Circle<span class="token punctuation">(</span>axis<span class="token operator">:</span> AxisDS<span class="token punctuation">,</span> color<span class="token operator">:</span> Color<span class="token punctuation">)</span> <span class="token keyword">extends</span> Shape <span class="token keyword">with</span> Adjustable<span class="token punctuation">[</span>AxisDS<span class="token punctuation">,</span> Circle<span class="token punctuation">]</span><span class="token punctuation">{</span></span>
<span class="line">  <span class="token keyword">def</span> area<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span> Math<span class="token punctuation">.</span>PI <span class="token operator">*</span> axis<span class="token punctuation">.</span>length <span class="token operator">*</span> axis<span class="token punctuation">.</span>length</span>
<span class="line">  <span class="token keyword">def</span> perimeter<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token number">2</span> <span class="token operator">*</span> Math<span class="token punctuation">.</span>PI <span class="token operator">*</span> axis<span class="token punctuation">.</span>length</span>
<span class="line">  <span class="token keyword">def</span> draw<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span> println<span class="token punctuation">(</span><span class="token string-interpolation"><span class="token id function">s</span><span class="token string">&quot;Drawing Circle </span><span class="token interpolation"><span class="token punctuation">${</span><span class="token expression">axis</span><span class="token punctuation">}</span></span><span class="token string"> with color </span><span class="token interpolation"><span class="token punctuation">${</span><span class="token expression">color</span><span class="token punctuation">}</span></span><span class="token string">&quot;</span></span><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line highlighted">  <span class="token keyword">override</span> <span class="token keyword">def</span> adjust<span class="token punctuation">(</span>ds<span class="token operator">:</span> AxisDS<span class="token punctuation">)</span><span class="token operator">:</span> Circle <span class="token operator">=</span> copy<span class="token punctuation">(</span>axis <span class="token operator">=</span> AxisDS<span class="token punctuation">(</span>axis<span class="token punctuation">.</span>foci <span class="token operator">+</span> ds<span class="token punctuation">.</span>foci<span class="token punctuation">,</span> axis<span class="token punctuation">.</span>length <span class="token operator">+</span> ds<span class="token punctuation">.</span>length<span class="token punctuation">)</span><span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Now lets see how a client may use this code.</p><div class="language-scala line-numbers-mode" data-highlighter="prismjs" data-ext="scala" data-title="scala"><pre><code><span class="line"><span class="token keyword">object</span> LiskovTest <span class="token punctuation">{</span></span>
<span class="line"></span>
<span class="line">  <span class="token keyword">implicit</span> <span class="token keyword">val</span> stdColorInverter<span class="token operator">:</span> ColorInvertor <span class="token operator">=</span>  <span class="token keyword">new</span> ColorInvertor <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">override</span> <span class="token keyword">def</span> invert<span class="token punctuation">(</span>color<span class="token operator">:</span> Color<span class="token punctuation">)</span><span class="token operator">:</span> Color <span class="token operator">=</span> Color<span class="token punctuation">(</span>r <span class="token operator">=</span> <span class="token number">255</span> <span class="token operator">-</span> color<span class="token punctuation">.</span>r<span class="token punctuation">,</span> g <span class="token operator">=</span> <span class="token number">255</span> <span class="token operator">-</span> color<span class="token punctuation">.</span>g<span class="token punctuation">,</span> b <span class="token operator">=</span> <span class="token number">255</span><span class="token operator">-</span> color<span class="token punctuation">.</span>b<span class="token punctuation">)</span></span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">  <span class="token keyword">def</span> main<span class="token punctuation">(</span>args<span class="token operator">:</span> Array<span class="token punctuation">[</span><span class="token builtin">String</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">Unit</span> <span class="token operator">=</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">val</span> color <span class="token operator">=</span> Color<span class="token punctuation">(</span><span class="token number">210</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span></span>
<span class="line">    <span class="token comment">//instantiating sub class objects</span></span>
<span class="line">    <span class="token keyword">val</span> rect <span class="token operator">=</span> Rectangle<span class="token punctuation">(</span>RectangleDS<span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">12</span><span class="token punctuation">)</span><span class="token punctuation">,</span> color<span class="token punctuation">)</span></span>
<span class="line">    <span class="token keyword">val</span> square <span class="token operator">=</span> Square<span class="token punctuation">(</span>SquareDS<span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">,</span> color<span class="token punctuation">)</span></span>
<span class="line">    <span class="token keyword">val</span> circle <span class="token operator">=</span> Circle<span class="token punctuation">(</span>AxisDS<span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">,</span> color<span class="token punctuation">)</span></span>
<span class="line">    </span>
<span class="line">    <span class="token keyword">val</span> shapes <span class="token operator">=</span> List<span class="token punctuation">(</span>rect<span class="token punctuation">,</span> square<span class="token punctuation">,</span> circle<span class="token punctuation">)</span></span>
<span class="line">    println<span class="token punctuation">(</span><span class="token string-interpolation"><span class="token id function">s</span><span class="token string">&quot;\nBefore Adjusting: </span><span class="token interpolation"><span class="token punctuation">$</span><span class="token expression">shapes</span></span><span class="token string">&quot;</span></span><span class="token punctuation">)</span></span>
<span class="line">    </span>
<span class="line">    <span class="token keyword">val</span> adjustedShape <span class="token operator">=</span> adjustShapes<span class="token punctuation">(</span>shapes<span class="token punctuation">)</span></span>
<span class="line">    println<span class="token punctuation">(</span><span class="token string-interpolation"><span class="token id function">s</span><span class="token string">&quot;\nAfter Adjusting: </span><span class="token interpolation"><span class="token punctuation">$</span><span class="token expression">adjustedShape</span></span><span class="token string">&quot;</span></span><span class="token punctuation">)</span></span>
<span class="line"> </span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">    <span class="token keyword">def</span> adjustShapes<span class="token punctuation">(</span>shapeList<span class="token operator">:</span> List<span class="token punctuation">[</span>Shape<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token operator">:</span> List<span class="token punctuation">[</span>Shape<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">{</span></span>
<span class="line">    shapeList<span class="token punctuation">.</span>map<span class="token punctuation">{</span></span>
<span class="line">      <span class="token keyword">case</span> sh<span class="token annotation punctuation">@Square</span><span class="token punctuation">(</span>_<span class="token punctuation">,</span>_<span class="token punctuation">)</span> <span class="token keyword">=&gt;</span> sh<span class="token punctuation">.</span>adjust<span class="token punctuation">(</span>SquareDS<span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">)</span></span>
<span class="line">      <span class="token keyword">case</span> sh<span class="token annotation punctuation">@Rectangle</span><span class="token punctuation">(</span>_<span class="token punctuation">,</span>_<span class="token punctuation">)</span> <span class="token keyword">=&gt;</span> sh<span class="token punctuation">.</span>adjust<span class="token punctuation">(</span>RectangleDS<span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">)</span></span>
<span class="line">      <span class="token keyword">case</span> sh<span class="token annotation punctuation">@Circle</span><span class="token punctuation">(</span>_<span class="token punctuation">,</span> _<span class="token punctuation">)</span> <span class="token keyword">=&gt;</span> sh<span class="token punctuation">.</span>adjust<span class="token punctuation">(</span>AxisDS<span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">)</span></span>
<span class="line">      <span class="token keyword">case</span> _ <span class="token keyword">=&gt;</span> sys<span class="token punctuation">.</span>error<span class="token punctuation">(</span><span class="token string-interpolation"><span class="token id function">s</span><span class="token string">&quot;Cannot adjust unidentified shape&quot;</span></span><span class="token punctuation">)</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="custom-container warning"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 24 24"><g fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="9"></circle><path d="M12 8v4"></path><path d="M12 16h.01"></path></g></svg><p class="custom-container-title">Be</p><p>One thing to keep in mind is if such pattern matching code for differet shapes is everywhere in your code base then when you are adding new Shape you will have to search through all your code base for adding this new Shape. So it is advised that you keep/restrict the code for this in one place/file.</p></div><p>If we run this, the output is</p><div class="custom-container tip"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 24 24"><g fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="9"></circle><path d="M12 8h.01"></path><path d="M11 12h1v4h1"></path></g></svg><p class="custom-container-title">Output</p><p>Before Adjusting: List(Rectangle(RectangleDS(10,12),Color(210,100,0)), Square(SquareDS(10),Color(210,100,0)), Circle(AxisDS(10,10),Color(210,100,0)))</p><p>After Adjusting: List(Rectangle(RectangleDS(5,22),Color(210,100,0)), Square(SquareDS(8),Color(210,100,0)), Circle(AxisDS(15,8),Color(210,100,0)))</p></div><p>Anyways that&#39;s all for now. Hope you learned something or leave a comment if you have doubts.</p></div></div><footer class="page-meta"><div class="meta-item edit-link"><span class="xicon-container left meta-item-label"><!--[--><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewbox="0 0 32 32" class="xicon-icon" style="width:20px;height:20px;font-size:20px;color:;"><path d="M2 26h28v2H2z" fill="currentColor"></path><path d="M25.4 9c.8-.8.8-2 0-2.8l-3.6-3.6c-.8-.8-2-.8-2.8 0l-15 15V24h6.4l15-15zm-5-5L24 7.6l-3 3L17.4 7l3-3zM6 22v-3.6l10-10l3.6 3.6l-10 10H6z" fill="currentColor"></path></svg><!--]--><span class="xicon-content" style="color:;font-size:14px;"><!--[-->Edit this page<!--]--></span></span></div><div class="meta-item last-updated"><span class="xicon-container left meta-item-label"><!--[--><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewbox="0 0 32 32" class="xicon-icon" style="width:20px;height:20px;font-size:20px;color:;"><path d="M26 4h-4V2h-2v2h-8V2h-2v2H6c-1.1 0-2 .9-2 2v20c0 1.1.9 2 2 2h20c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm0 22H6V12h20v14zm0-16H6V6h4v2h2V6h8v2h2V6h4v4z" fill="currentColor"></path></svg><!--]--><span class="xicon-content" style="color:;font-size:14px;"><!--[-->Last Updated 6/17/2025, 11:22:56 AM<!--]--></span></span></div></footer><!----><!----></div><div class="page-catalog-container"><h5 class="tip">ON THIS PAGE</h5><ul><!--[--><!--[--><li class="page-catalog-menu-depth_2"><a aria-current="page" href="/blogs/technology/2020/May/liskov.html#the-dreaded-liskov-substitution-principle" class="router-link-active router-link-exact-active link page-catalog-item page-catalog-item" aria-label="The Dreaded Liskov Substitution Principle"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:;font-size:14px;"><!--[-->The Dreaded Liskov Substitution Principle<!--]--></span></span><!--[--><!--]--></a></li><!--]--><!--[--><li class="page-catalog-menu-depth_2"><a aria-current="page" href="/blogs/technology/2020/May/liskov.html#how-is-solid-different-from-design-patterns-and-why-should-i-try-to-learn-it" class="router-link-active router-link-exact-active link page-catalog-item page-catalog-item" aria-label="How is SOLID different from Design Patterns and why should I try to learn it?"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:;font-size:14px;"><!--[-->How is SOLID different from Design Patterns and why should I try to learn it?<!--]--></span></span><!--[--><!--]--></a></li><!--]--><!--[--><li class="page-catalog-menu-depth_2"><a aria-current="page" href="/blogs/technology/2020/May/liskov.html#definition-of-liskov-substitution-principle" class="router-link-active router-link-exact-active link page-catalog-item page-catalog-item" aria-label="Definition of Liskov Substitution Principle"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:;font-size:14px;"><!--[-->Definition of Liskov Substitution Principle<!--]--></span></span><!--[--><!--]--></a></li><!--]--><!--[--><li class="page-catalog-menu-depth_2"><a aria-current="page" href="/blogs/technology/2020/May/liskov.html#misunderstanding" class="router-link-active router-link-exact-active link page-catalog-item page-catalog-item" aria-label="Misunderstanding"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:;font-size:14px;"><!--[-->Misunderstanding<!--]--></span></span><!--[--><!--]--></a></li><!--]--><!--[--><li class="page-catalog-menu-depth_2"><a aria-current="page" href="/blogs/technology/2020/May/liskov.html#square-and-rectangle-problem" class="router-link-active router-link-exact-active link page-catalog-item page-catalog-item" aria-label="Square and Rectangle Problem"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:;font-size:14px;"><!--[-->Square and Rectangle Problem<!--]--></span></span><!--[--><!--]--></a></li><!--[--><li class="page-catalog-menu-depth_3"><a aria-current="page" href="/blogs/technology/2020/May/liskov.html#initial-solution" class="router-link-active router-link-exact-active link page-catalog-item page-catalog-item" aria-label="Initial Solution"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:;font-size:14px;"><!--[-->Initial Solution<!--]--></span></span><!--[--><!--]--></a></li><!--]--><!--[--><li class="page-catalog-menu-depth_3"><a aria-current="page" href="/blogs/technology/2020/May/liskov.html#reflecting-on-previous-solution-and-adding-new-requirement" class="router-link-active router-link-exact-active link page-catalog-item page-catalog-item" aria-label="Reflecting on previous solution and adding new requirement"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:;font-size:14px;"><!--[-->Reflecting on previous solution and adding new requirement<!--]--></span></span><!--[--><!--]--></a></li><!--]--><!--[--><li class="page-catalog-menu-depth_3"><a aria-current="page" href="/blogs/technology/2020/May/liskov.html#intro-to-pattern-matching" class="router-link-active router-link-exact-active link page-catalog-item page-catalog-item" aria-label="Intro to Pattern Matching"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:;font-size:14px;"><!--[-->Intro to Pattern Matching<!--]--></span></span><!--[--><!--]--></a></li><!--]--><!--[--><li class="page-catalog-menu-depth_3"><a aria-current="page" href="/blogs/technology/2020/May/liskov.html#apply-pattern-matching-to-our-shapes-problem" class="router-link-active router-link-exact-active link page-catalog-item page-catalog-item" aria-label="Apply Pattern Matching to Our Shapes problem"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:;font-size:14px;"><!--[-->Apply Pattern Matching to Our Shapes problem<!--]--></span></span><!--[--><!--]--></a></li><!--]--><!--[--><li class="page-catalog-menu-depth_3"><a aria-current="page" href="/blogs/technology/2020/May/liskov.html#improving-our-solution" class="router-link-active router-link-exact-active link page-catalog-item page-catalog-item" aria-label="Improving our solution"><!--[--><!--]--><span class="xicon-container left"><!--[--><!----><!--]--><span class="xicon-content" style="color:;font-size:14px;"><!--[-->Improving our solution<!--]--></span></span><!--[--><!--]--></a></li><!--]--><!--]--><!--]--></ul></div></main><!--]--></div></div><!--[--><!----><!----><!--]--><!--]--></div>
    <script type="module" src="/assets/app--Ei2UsaZ.js" defer></script>
  </body>
</html>
